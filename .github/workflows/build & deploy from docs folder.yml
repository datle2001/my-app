name: build & deploy from /public

on:
 push:
  branches: [ "master" ]
      
 pull_request:
  branches: [ "master" ]
  
    # Allows you to run this workflow manually from the Actions tab
 workflow_dispatch:
 
permissions:
 id-token: 'write'
      
jobs:
 build:
  runs-on: ubuntu-latest

  strategy:
   matrix:
    node-version: [20.x]
  
  steps:
   # Checks-out your repository under $GITHUB_WORKSPACE, so your job can access it
   - uses: actions/checkout@v4
  
   #- name: Install Node.js ${{ matrix.node-version }}
    # uses: actions/setup-node@v3
     #with:
      #node-version: ${{ matrix.node-version }}
      #cache: 'npm'
      
   #- name: Install dependencies
    # run: npm install
     
   #- name: Build into docs
     #run: npm run build
   - name: Setup Pages
     uses: actions/configure-pages@v5
      
   - name: Upload artifact for deployment job
     uses: actions/upload-artifact@v3
     with:
      name: node-app
      path: .
      
   - name: Build
     uses: actions/jekyll-build-pages@v1
     
 deploy:
  runs-on: ubuntu-latest
  needs: build
  
  steps:
   #- name: Download artifact from build job
    # uses: actions/download-artifact@v3
     #with:
      #name: node-app

   - name: Deploy to Github Page
     id: deployment
     uses: actions/deploy-pages@v4

  environment:
   name: github-pages
   url: ${{ steps.deployment.outputs.page_url }}
